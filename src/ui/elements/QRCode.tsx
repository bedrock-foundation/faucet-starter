import React from 'react';
import styled from '@emotion/styled';
import { GeistUIThemes, Loading, useTheme } from '@geist-ui/core';
import { QRCode as ReactQRCode } from 'react-qrcode-logo';

type ContainerProps = {
  theme: GeistUIThemes;
  isLoading: boolean;
  size?: number;
};

const Container = styled.div<ContainerProps>`
  box-sizing: border-box;
  padding: 16px;
  width: ${(props) => (props.size ? `${props.size}px` : '372px')};
  height: ${(props) => (props.size ? `${props.size}px` : '372px')};
  background-color: ${(props) =>
    props.isLoading
      ? props.theme.palette.background
      : props.theme.palette.accents_8};
  border: 1px solid ${(props) => props.theme.palette.accents_2};
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
`;

export type QRCodeProps = {
  value: string;
  size?: number;
};

const base64Logo =
  'data:image/png;base64,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PHki3EDVBJ2qRXi3x3cwBT54jlDHxweR3v4MkImgt0QEptPpFGB8Yt+D/8/Iyt3WACABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABorU7jVzYO+szMwQIATM4w7Y2grzd6oaADwEQdOHC46UvXZ7rdstHklQcPvlUAgMmZnW08mN6Y6XSajdCH+C4BABiB119vOpjuPuyN0LsPm7z00KH5AgBMzqFDc01futZbQ++uNXnlG2/MW0cHgInp9NvbQLfTmV2bmZ2dXWny6oh586E/ALAX3/zm9xsPpD//vPtg5v33F9dLw53ux46dLgDA+B0+fLLpS9fX1xfX+9eh99bR7zb5jBj6G6UDwHgdOHC0fOtb7zR6bbdbVuL5y6DP3CkNGaUDwHgdO/ajpi/tjck7/zve6Af9F79YXOk9NboePb5jsOMdAMbjjTeOl29/+1TTl69/2fDtR792bpSG3nrrrB3vADBiMzOHyh//8X9s+vJu7zMWn3/u4I3NzXK9NBylHzhwxNQ7AIxUpz/VHo1taGNzs/t3gx/MPn/vxspnx46dOdR7c6HJVzl06F/1nz/9tNG5NADASxw7tlDefPPfN315b3Te/auPPlp6vqn9K3db+3KU/rg0FD+5kToA7M0uerq+uTlza/s7Zrf/IEbpR48ufN7plD8vDQ1OsTFSB4BhdXYT81g7v/zRR4urX/1KOzhx4urf9qJ+pgzh8eOflUePVsvW1mcFAHi52AAXa+ZHj/6wDOn//fznS//mxXe+ttMrZ2c7P97a6v59782jpaH4BcUlbb/85d+Uzz//VQEAdhaXpsVu9iE2wA083tzs/IedPjC70zt//euVjWGn3vtfbPZgOXLk35XXXjvSi/o/GK0DwDYHD/7L8tZb/6k/xT7Evc4Hur0u//ePPlr66U4f7LzsM0+c+Mm1TqdzuezS7373fvntb9d6zx8UAJhGMbV+8OBb5c03f9T07mk7iV3tSz//+V8ufd0LOuUV3n77Jzd7L7tQ9iBG6p98sl4+/XS9P3J/9uyz8vTphhE8AIl0evF+vTfyPlRef/1f9KfT42TVEdx+PGJ+qxfzi+WlP3sDJ05c/fveMP/dAgBMUjduvvLhh0t/+qoXzpQGel/oB72vuVwAgEnpj8ybxDzMloYePVq9e+zYmRjRx8VyjUb2AMCu9Ebm3RsffviX/7XpJzQOenj0aGXl6NGFJ73p9z/p/fBQAQBG7XHsZn/ZBrid7Gqk/c47i/NbW92/7b05X4zWAWAU+uvlT592fry+vrhehrSnGJ84cfVC77uIn/TePF4AgN3orZWXjV5Plz74YKnxrcxfNNSU+4t+85vVte9+98zd3mi9dDqd7/feFfvyjdgB4NX6Ie89/mpzs/OfP/poabXswcjiG9Pwz551F74csc8XYQeAnQxCfqMX8hu96fWNMgJjie73vre4MDOzdb735WNH/Pw4fy4AaLnul8/rvUXyu93uzN1f/GJxpYzY2CMbI/enT8up2dmtU72f7t/2Fvzne6P4OI1+vgBAPr1w99fEI+APez1fe/p0dnU3G92G8f8BeqcF3lcFZWwAAAAASUVORK5CYII=';

const QRCode = React.forwardRef<any, QRCodeProps>(({ value, size }, ref) => {
  /** Actions */
  const theme = useTheme();
  const [loading, setLoading] = React.useState(true);

  React.useEffect(() => {
    setTimeout(() => {
      setLoading(false);
    }, 500);
  }, []);

  const qrSize: number = size ? size - 32 : 340;

  /* Render */
  return (
    <Container theme={theme} isLoading={loading} size={size}>
      {!value || loading ? (
        <Loading color={theme.palette.accents_2} />
      ) : (
        <ReactQRCode
          ref={ref}
          value={value ?? ''}
          size={qrSize}
          logoImage={base64Logo}
          logoWidth={60}
          removeQrCodeBehindLogo
          logoOpacity={1}
          eyeRadius={8}
        />
      )}
    </Container>
  );
});

export default QRCode;
